cp.location{
  import lo.thing.
  import lo.arith.
  
  location <~ {
    merge:(location)=>location.
    line:integer.
    column:integer.
    from:integer.
    length:integer.
  }.

  loc:(integer,integer,integer,integer)<=>location.
  loc(Line,Off,Col,Len)..{
    line = Line.
    column = Col.
    from = Off.
    length = Len.

    merge(loc(_,_,C,L)) => loc(Line,Off,Col,C-Col+L).
  }.

  hasLoc <~ { locOf:location. }.
}
/*
 * unit testing harness
 */
lo.unit{
  import lo.
  import lo.io.

  harness <~ { doTest:(){}.  }.

  harness:(string) <=> harness.
  harness(Nm) <= {
    doTest().
  }.

  implementation display[harness] <= {
    disp(harness(Nm)) => ss(Nm).
  }

  check:(harness){}.
  check(T) :-
    (T.doTest() ?
      stdout.outLine("test \(T) ok") |
      stdout.outLine("test \(T) failed"))).

  checkUnit:(harness){}.
  checkUnit(T) :-
      stdout.outLine("starting unit \(T)"),
      check(T).
}

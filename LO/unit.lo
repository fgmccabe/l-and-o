/*
 * unit testing harness
 */
lo.unit{
  import lo.
  -- import lo.io.

  public type harness <~ { doTest:(){}. desc:string. }.

  harness:(string) <=> harness.
  harness(Nm) <= {
    doTest().
  }.

  implementation display[harness] <= {
    disp(H) => ss(H.desc).
  }

  check:(harness){}.
  check(T) :-
    (T.doTest() ?
      _logmsg("\(T) ok") |
      _logmsg("\(T) failed")).

  public checkUnit:(harness){}.
  checkUnit(T) :-
      _logmsg("starting \(T)"),
      check(T).
}

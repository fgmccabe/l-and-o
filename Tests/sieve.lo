test.sieve{
  -- Sieve of erastosthenes
  import lo.

  filter:(list[integer],integer) => list[integer].
  filter([],_) => [].
  filter([I,..R],K) => filter(R,K) :-  I % K = 0 .
  filter([I,..R],K) => [I,..filter(R,K)].

  sieve:(list[integer]) => list[integer].
  sieve([]) => [].
  sieve([Pr,..R]) => [Pr,..sieve(filter(R,Pr))].

  iota:(integer,integer) => list[integer].
  iota(Mx,Cu) => [] :-  Mx<Cu.
  iota(Mx,Cu) => [Cu,..iota(Mx,Cu+2)].

  main:(integer){}.
  main(L) :-
    logMsg("sieve up to \(L) is \(sieve(iota(L,3)))").
}

test.mapp{
  -- import lo.

  type all t ~~ list[t] ::= '[]' | ',..'(t,list[t]).

  type all k,v ~~ map[k,v] <~ {}.

  public mapp:all e,f ~~ (list[e],((e)=>f))=>list[f].
  mapp([],_) => [].
  mapp([e,..l],f) => [f(e),..mapp(l,f)].

  public contract all m/1 ~~ mapping[m] <~ {
    mp:all e,f ~~ (m[e],(e)=>f) => m[f].
  }

  implementation mapping[list] .. {
    mp = mapp.
  }

  id:(integer)=>integer.
  id(X) => X.

  assert mp([1,2,3],id) = [1,2,3].
}